<div class="panel-group" id="accordion">
  <% inspection_files.order_alphanumeric(:filename).grouped_by_protocol.each_with_index do |(protocol, inspection_files), index| %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-sample" href="#collapse<%= index %>">
          <%= protocol.blank? ? 'Unmatched' : protocol.name %> (<%= inspection_files.count %>)
        </a>
      </h4>
    </div>
    <div id="collapse<%= index %>" class="panel-collapse collapse in">
      <div class="panel-body">
        <%= render 'inspection_files/inspection_files', inspection_files: inspection_files %>
      </div>
    </div>
  </div>
  <% end %>
</div>
